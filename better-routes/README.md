# Better Routes

`better_routes` is a Rust library designed to simplify route management in Axum applications. It provides macros for creating typed routes and method handlers, making route configuration more manageable and type-safe.

## Key Features

- **Centralized Routing**:
  - Define and manage all your routes in a centralized manner using the `routes!` macro.
  - Simplifies route configuration by keeping all route definitions in one place.
- **Typed Paths**:
  - Leverage `axum_extra::routing::TypedPath` for type-safe route definitions within the `axum_extra` crate.
  - Avoid manual string-based routing by using types to define and validate paths and parameters.
- **Method Handlers**:
  - The `method_helper` macro generates `MethodHandler` implementations for your TypedPaths, associating them with their respective handlers, reducing the risk of errors.
  - Easily create route handlers with method annotations.

## Installation

Add `better_routes` to your `Cargo.toml`:

```toml
[dependencies]
better-routes = "0.1.0"
axum = "0.7.5"
axum-extra = { version = "0.9.3", features = ["typed-routing"] }
serde = { version = "1.0.204", features = ["derive"] }
tokio = { version = "1.39.2", features = ["macros", "rt-multi-thread"] }
```

## Usage

Hereâ€™s a simple example demonstrating how to use `better_routes` with `axum` and `axum-extra`.

### Example

```rust
use axum_extra::routing::RouterExt;
use axum_extra::routing::TypedPath;
use better_routes::method_helper;
use better_routes::routes;

// Define routes using the `routes!` macro.
routes! {
    "/foo/:id" => struct Foo { id : usize },
    "/bar" => struct Bar;,
}

// Use the `method_helper` macro to implement route handlers for the `Foo` struct.
#[method_helper]
impl Foo {
    #[get]
    async fn foo(self) {
        println!("id: {}", self.id);
    }
}

// Use the `method_helper` macro to implement route handlers for the `Bar` struct.
#[method_helper]
impl Bar {
    #[post]
    async fn bar(self) {}
}

#[tokio::main]
async fn main() {
    // Use the router function generated by the `routes!` macro.
    let app = router();

    // Generate a URI from the `Foo` instance
    let foo_uri = Foo { id: 42 }.to_uri(); // This method is provided by TypedPath
    println!("foo_uri: {}", foo_uri); // Output: foo_uri: /foo/42

    // Start the server
    let tcp_listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();

    axum::serve(tcp_listener, app).await.unwrap();
}
```

### Explanation

- **`routes!` Macro**: Maps URL paths to structs for route handling and supports type-safe URI generation.
- **`method_helper` Macro**: Associates methods with paths to create route handlers.

## Documentation

For more advanced usage, including state and rejection handling, please refer to the full documentation or explore additional examples provided in the codebase.

## License

This project is licensed under the MIT License. See the [LICENSE][license] file for details.

[license]: https://github.com/ratnaraj7/better-routes/blob/main/better-routes/LICENSE
